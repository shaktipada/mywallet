{% extends 'base.html' %}
{% block head_title %} MyWallet Admin {% endblock head_title %}
{% block body_content %}
	<div class="row">
		<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
		<div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
			<div id='signin'>
				<h3 class='text-center'>Sign In</h3>
      	{% csrf_token %}
				<form role="form" action="" method="post" accept-charset="utf-8" id='signin_form'>
					<div class="form-group">
				    <label for="username"></label>
						<input id='username' class="form-control" type="text" name="username" value="" placeholder="Username / EmailID">
					</div>
					<div class="form-group">
				    <label for="password"></label>	
						<input id='password' class="form-control" type="password" name="password" value="" placeholder="Password">
					</div>
					<div class="form-group">
				    <label for="type"></label>
						<input id='type' class="form-control" type="hidden" name="type" value="admin">
					</div>
				</form>
				<div class="row text-center">
					<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
						<button type="" id='submit_signin' class='btn btn-danger btn-lg'>Submit</button>
					</div>
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
						<button type="" id='load_signup' class='btn btn-primary btn-lg'>Sign Up</button>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
				</div>
			</div>
			
			<div id='signup' style="display: none;">
				<h3 class='text-center'>Sign Up</h3>
      	{% csrf_token %}
				<form role="form" action="" method="post" accept-charset="utf-8" id='signup_form'>
  				<div class="form-group">
				    <label for="first_name"></label>
						<input id='first_name' class="form-control" type="text" name="first-name" value="" placeholder="First Name">
					</div>
  				<div class="form-group">
				    <label for="last_name"></label>
						<input id='last_name' class="form-control" type="text" name="last-name" value="" placeholder="Last Name">
					</div>
  				<div class="form-group">
				    <label for="email"></label>
						<input id='email' class="form-control" type="email" name="email" value="" placeholder="Email ID">
					</div>
  				<div class="form-group">
				    <label for="contact_number"></label>
						<input id='contact_number' class="form-control" type="phone" name="contact_number" value="" placeholder="Mobile no.">
					</div>
  				<div class="form-group">
				    <label for="username"></label>
						<input id='username' class="form-control" type="text" name="username" value="" placeholder="Username / EmailID">
					</div>
  				<div class="form-group">
				    <label for="passcode"></label>
						<input id='passcode' class="form-control" type="password" name="password" value="" placeholder="Password">
					</div>
					<div class="form-group">
				    <label for="confirm_passcode"></label>
						<input id='confirm_passcode' class="form-control" type="password" name="confirm-passcode" value="" placeholder="Confirm Password">
					</div>
					<div class="form-group">
				    <label for="type"></label>
						<input id='type' class="form-control" type="hidden" name="type" value="admin">
					</div>
				</form>
				<div class="row text-center">
					<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
						<button type="" id='submit_signup' class='btn btn-danger btn-lg'>Submit</button>
					</div>
					<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
						<button type="" id='load_signin' class='btn btn-primary btn-lg'>Sign In</button>
					</div>
					<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
				</div>
			</div>
		</div>
		<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
	</div>
{% endblock body_content %}

{% block java_scripts %}
	  <script>
    	$(document).ready(function(){

      	$('#load_signin').click(function(event) {
      		event.preventDefault();
        	$("#signin").show(200);
        	$("#signup").hide(200);
      	});
      	
      	$('#load_signup').click(function(event) {
      		event.preventDefault();
        	$("#signup").show(200);
        	$("#signin").hide(200);
      	});

      	$('#submit_signin').click(function(event) {
					event.preventDefault();
        	$("#signin #submit_signin").button('loading');
      		console.log($( "form#signin_form" ).serializeArray());
      		$.ajax({
            type: 'POST',
            url: "{% url 'signin' %}",
            data: $( "form#signin_form" ).serializeArray(),
            dataType: 'json',
            success: function(results) {
	            	console.log(results);
	            	location.href = "{% url 'dashboard_home' %}";
								//$.get("{% url 'dashboard_home' %}", results);
            },
            error: function(xhr, status, error){
	            	console.log(error);
            }
      		});
      	});

      	$('#submit_signup').click(function(event) {
					event.preventDefault();
      		var password = $('#passcode').val();
      		var confirm_password = $('#confirm_passcode').val();
      		console.log(password, confirm_password);
      		if (password == confirm_password) {
	      		$("#signup #submit_signup").button('loading');
	      		$.ajax({
	            type: 'POST',
	            url: "{% url 'signup' %}",
	            data: $( "form#signup_form" ).serializeArray(),
	            dataType: 'json',
	            success: function(results) {
	            	console.log(results);
	            },
	            error: function(xhr, status, error){
	            	console.log(error)
	            }
	      		});	
      		}
      		else {
    				alert("Password mismatch");
      		}
      	});
    	
    	});
  	</script>
{% endblock java_scripts %}
